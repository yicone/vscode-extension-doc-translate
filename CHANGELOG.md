# 変更履歴

"doc-translate" 拡張機能の主な変更点を記録します。

## [1.0.0]

🎉 **正式版リリース** - プロダクションレディな品質を達成。

### 主要機能
- ✅ **マルチLLM対応**: Claude、OpenAI、Gemini（3プロバイダー）
- ✅ **マルチ言語対応**: Python、JavaScript、TypeScript、Go（4言語）
- ✅ **自動言語検出**: francライブラリによる翻訳元言語の自動認識
- ✅ **インライン翻訳表示**: ホバー不要で常時表示、編集中も保持
- ✅ **永続化キャッシュ**: API呼び出しを最小化、再起動後も保持
- ✅ **エラーハンドリング**: 詳細なエラー通知とリトライ機能
- ✅ **並列翻訳**: 最大5並列リクエスト、progressive translation
- ✅ **CI/CD**: GitHub Actionsによる継続的インテグレーション

### 品質保証
- 90個のユニットテスト（コアコンポーネントを網羅）
- 包括的なドキュメント（ARCHITECTURE.md、CONTRIBUTING.md）
- Mermaid図によるアーキテクチャドキュメント
- TypeScript型安全性の完全実装

### 開発者体験
- 整理されたディレクトリ構造（providers/, detectors/, services/, utils/）
- Factory PatternとTemplate Method Patternによる拡張性
- ConfigManagerによる設定の一元管理
- 詳細なロギングとデバッグ機能

### ユーザー体験
- 非侵入的なエラー通知（ダイアログ/ステータスバー）
- スパム防止機能（60秒cooldown）
- ステータスバーでの進捗表示とツールチップ
- 翻訳失敗時のリトライオプション

このバージョンは安定しており、プロダクション環境での使用に適しています。

## [0.5.1]

バグ修正とパフォーマンス改善:
- 翻訳表示の余白調整（視認性の向上）
- エラー通知システムの追加
  - Critical error: ダイアログ表示
  - 通常error: ステータスバー表示（自動消滅）
  - スパム防止（60秒cooldown）
- ファイルオープン時の翻訳表示を改善
  - キャッシュから即座に復元
  - タブ切り替えで確実に表示
- 編集中も翻訳表示を保持（編集操作で消えない）
- 翻訳ロジックのシンプル化（キャッシュベース）

## [0.5.0]

メジャーアップデート - 自動言語検出 & リファクタリング:
- **自動言語検出**: francライブラリによる翻訳元言語の自動検出
- **言語固有フォーマット**: Python `"""`, JS/TS `/** */`, Go `/* */`
- **progressive translation**: 翻訳完了したブロックから順次表示
- **コードリファクタリング**:
  - ディレクトリ構造の整理（providers/, detectors/, services/, utils/）
  - BaseProvider/BaseDetectorによる共通化
  - ConfigManagerによる設定の一元管理
  - 重複コードの削減（-245行）
- **包括的なテスト**: 87テスト追加（unit tests）

## [0.4.0] - 2025-01-08

### 追加機能
- **複数のLLMプロバイダー対応**: Anthropic Claude、OpenAI、Google Geminiから選択可能
  - プロバイダーごとのAPI認証とモデル設定
  - プロバイダーファクトリーパターンによる拡張性の高い実装
- **複数のプログラミング言語対応**: Python、JavaScript、TypeScript、Goに対応
  - JavaScript/TypeScript: JSDoc、複数行コメント（`/* */`）、単一行コメント（`//`）
  - Go: godoc、package doc、複数行コメント、単一行コメント
  - 言語ごとの最適化されたブロック検出器
- **翻訳言語の自由な設定**: 翻訳元（sourceLang）と翻訳先（targetLang）の言語を自由に設定可能
  - 対応言語: en, ja, zh, ko, fr, de, es, it, pt, ru
  - プロンプトテンプレートの多言語対応

### 変更
- プロバイダー抽象化による拡張性の向上
- ブロック検出器の抽象化とファクトリーパターン化
- 各言語のLSP統合の改善

### 技術的な改善
- `ITranslationProvider` インターフェースの導入
- `IBlockDetector` インターフェースの導入
- ファクトリーパターンによるプロバイダーとブロック検出器の管理

## [0.3.0] - 2025-01-08

### 追加機能
- **インライン翻訳表示**: ホバー不要で常時表示
  - コメント（`#`）: 各行の右側に翻訳を表示
  - Docstring（`"""`/`'''`）: 原文を隠して翻訳をオーバーレイ
- **複数行翻訳表示**: docstringの複数行翻訳を適切にフォーマット表示
- **永続化キャッシュ**: VSCode globalStateを使用してキャッシュを永続化
- **並列翻訳**: 最大5並列リクエストでrate limit対策
- **カーソル・選択時の原文表示**: カーソルまたは選択がdocstringブロックにある時は翻訳を非表示
- **モジュールdocstringサポート**: ファイルトップレベルのdocstringを翻訳
- **ファイル保存時の自動再翻訳**: キャッシュを活用した高速再翻訳
- **事前翻訳サービス**: Pythonファイルを開くと自動的にバックグラウンドで翻訳

### 変更
- モデルをClaude Haiku 4.5 (20251001)に変更
- LSPベースのdocstring検出のみ使用（コメント検出ロジックを削除）
- ホバープロバイダーを削除（インライン表示に置き換え）

### 修正
- docstring翻訳時のインデント問題を修正
- 原文と翻訳が混在する表示問題を修正

## [0.1.0] - 2025-01-08

### 追加機能
- Pylanceを使用したLSPベースのdocstring検出
- PythonのdocstringとコメントのホバープロバイダーBE
- Claude API統合（Claude 4.5 Sonnet）
- 翻訳キャッシングシステム
- ステータスバーの読み込みインジケーター
- 包括的なデバッグログ
- 未保存のPythonファイル（untitledスキーム）のサポート
- コマンド: キャッシュクリア、ログ表示

### 機能
- 以下を検出して翻訳:
  - 複数行docstring（`"""`と`'''`）
  - コメントブロック（連続する`#`行）
  - インラインコメント
- 環境変数とsettings.jsonによる設定
- モデル、APIキー、タイムアウトの設定可能

## [未リリース]

- 初回リリース
